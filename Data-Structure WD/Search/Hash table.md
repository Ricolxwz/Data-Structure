## 散列表

### 基本概念

- 散列函数(哈希函数): 一个把查找表中的关键字映射成该关键字对应的地址的函数, 记为Hash(key)=Addr
- 冲突: 散列函数可能把两个或两个以上的不同关键字映射到同一地址
- 同义词: 发生冲突的不同关键字
- 散列表(哈希表): 根据关键字而直接进行访问的数据结构. 散列表建立了关键字和存储地址之间的一种映射关系

### 散列函数的构造方法

- 直接定址法
  - 直接取关键字的某个线性函数的值为散列地址, 散列函数为H(key)=key或H(key)=a*key+b
  - 计算方式简单, 不会产生冲突, 适合连续分布的情况; 如果关键字分布不连续, 会造成存储空间的浪费
- 除留余数法
  - 假设散列表的表长为m, 取一个不大于m但最接近或者等于m的质数(素数)p. 散列函数为H(key)=key%p
  - 关键是选p, 使得每个关键字通过该函数转换后等概率地映射到散列空间上的任一地址, 从而尽可能减少冲突的可能性
- 数字分析法
  - 设关键字是r进制数, r个数码在各位上出现的频率不一定相同, 可能在某些位上分布不均匀, 只有某几种数码经常出现, 此时应选取数码分布比较均匀的若干位作为散列地址
- 平方取中法
  - 取关键字的平方值的中间几位作为散列地址, 适用于关键字的每位取值都不够均匀或者均小于散列地址所需的位数

### 处理冲突的方法

- 拉链法
  - 又称为链接法、链地址法, 把所有“同义词”存储在一个链表中. 假设散列地址为i的同义词链表的头指针存放在散列表的第i个单元中, 因而查找、插入和删除操作主要在同义词链中进行. 拉链法适用于经常进行插入和删除的操作
- 开放地址法
  - 开放地址法, 是指可存放新表项的空闲地址既向它的同义词表项开放, 又向它的非同义词表项开放, 数学递推公式:Hi=(H(key)+di)%m, i = 0,1,2,...k(k≤m-1), m表示散列表表长; di表示增量序列; i可以理解为“第i次发生冲突”
  - 采用“开放定址法”时, 删除结点不能简单地将被删除结点的空间置为空, 否则将截断在它之后填入散列表的同义词结点的查找路径, 可以做一个“删除标记”, 进行逻辑的删除
  - 开放地址法分为三种方法:
    - 线性探测法
    - 平方探测法
    - 伪随机序列法
  - 线性探测法
    - 发生冲突的时候, 每次往后探测相邻的下一个单元是否为空
    - di=0, 1, 2, 3, ... m-1
    - 空位置的判断也要算作一次比较, 这和拉链法不同, 因为拉链法里面的空位置存储的是指针而这里存储的是值
    - 越早遇到空位置, 就可以越早确定查找失败
    - 线性探测法很容易造成同义词、非同义词的“聚集(堆积)现象”, 严重影响查找的效率
  - 平方探测法
    - di=0^2, 1^2, -1^2, 2^2, -2^2, ... , K^2, -K^2, K≤m/2
    - 比起线性探测法更不容易产生“聚集(堆积)”问题
    - 散列表的长度必须是一个表示成4j+3的素数, 才能探测到所有位置
  - 伪随机序列法
    - di是一个伪随机序列
- 再散列法
  - 除了原始的散列函数H(key)外, 多准备几个散列函数, 当散列函数冲突的时候, 用下一个散列函数计算一个新的地址, 直到不冲突为止:Hi=RHi(key), i=1, 2, 3, ... , k